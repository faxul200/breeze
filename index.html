
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B2B AI Companies Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <style>
        :root {
            --primary-color: #4e73df;
            --secondary-color: #1cc88a;
            --dark-color: #5a5c69;
            --light-color: #f8f9fc;
        }
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f8f9fc;
        }
        .navbar {
            background-color: white;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
        }
        .sidebar {
            min-height: 100vh;
            background-color: var(--primary-color);
            background-image: linear-gradient(180deg, var(--primary-color) 10%, #224abe 100%);
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
        }
        .sidebar-brand {
            height: 4.375rem;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 800;
            padding: 1.5rem 1rem;
            text-align: center;
            letter-spacing: 0.05rem;
            z-index: 1;
        }
        .sidebar-brand-icon {
            font-size: 2rem;
        }
        .sidebar-brand-text {
            display: inline;
            font-size: 1.2rem;
        }
        .sidebar-divider {
            border-top: 1px solid rgba(255, 255, 255, 0.15);
            margin: 0 1rem 1rem;
        }
        .sidebar-heading {
            color: rgba(255, 255, 255, 0.4);
            font-size: 0.75rem;
            font-weight: 800;
            letter-spacing: 0.13rem;
            text-transform: uppercase;
            padding: 0 1rem;
            margin-bottom: 1rem;
        }
        .nav-item {
            position: relative;
        }
        .nav-link {
            color: rgba(255, 255, 255, 0.8);
            font-weight: 700;
            padding: 0.75rem 1rem;
            font-size: 0.85rem;
        }
        .nav-link:hover {
            color: white;
        }
        .nav-link.active {
            color: white;
            font-weight: 700;
        }
        .nav-link i {
            margin-right: 0.25rem;
            font-size: 0.85rem;
        }
        .card {
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
            margin-bottom: 1.5rem;
        }
        .card-header {
            background-color: #f8f9fc;
            border-bottom: 1px solid #e3e6f0;
        }
        .card-body {
            padding: 1.25rem;
        }
        .company-card {
            transition: transform 0.3s;
            height: 100%;
        }
        .company-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0.5rem 2rem 0 rgba(58, 59, 69, 0.3);
        }
        .badge-funding {
            background-color: var(--primary-color);
            color: white;
        }
        .badge-location {
            background-color: var(--secondary-color);
            color: white;
        }
        .badge-industry {
            background-color: var(--dark-color);
            color: white;
        }
        .stats-card {
            border-left: 0.25rem solid;
            border-radius: 0.35rem;
        }
        .stats-card.primary {
            border-left-color: var(--primary-color);
        }
        .stats-card.success {
            border-left-color: var(--secondary-color);
        }
        .stats-card.info {
            border-left-color: #36b9cc;
        }
        .stats-card.warning {
            border-left-color: #f6c23e;
        }
        .stats-card-body {
            padding: 0.75rem 1.25rem;
        }
        .stats-card-heading {
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            color: var(--primary-color);
            margin-bottom: 0.25rem;
        }
        .stats-card-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark-color);
            margin-bottom: 0;
        }
        .stats-card-icon {
            font-size: 2rem;
            color: #dddfeb;
        }
        .table-responsive {
            overflow-x: auto;
        }
        #companyTable th {
            cursor: pointer;
        }
        .search-container {
            margin-bottom: 1.5rem;
        }
        .footer {
            padding: 2rem 0;
            background-color: white;
            border-top: 1px solid #e3e6f0;
        }
        .company-logo {
            width: 50px;
            height: 50px;
            background-color: #f1f1f1;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        #map {
            height: 400px;
            width: 100%;
            border-radius: 0.35rem;
        }
        .chart-container {
            position: relative;
            height: 300px;
        }
    </style>
</head>
<body>
    <div class="d-flex">
        <!-- Sidebar -->
        <div class="sidebar col-lg-2 d-none d-lg-block">
            <a class="sidebar-brand d-flex align-items-center justify-content-center" href="#">
                <div class="sidebar-brand-icon">
                    <i class="bi bi-robot"></i>
                </div>
                <div class="sidebar-brand-text mx-3">AI Insights</div>
            </a>
            <hr class="sidebar-divider">
            <div class="sidebar-heading">Dashboard</div>
            <div class="nav-item">
                <a class="nav-link active" href="#summary">
                    <i class="bi bi-speedometer2"></i>
                    <span>Summary</span>
                </a>
            </div>
            <div class="nav-item">
                <a class="nav-link" href="#companies">
                    <i class="bi bi-building"></i>
                    <span>Companies</span>
                </a>
            </div>
            <div class="nav-item">
                <a class="nav-link" href="#map-section">
                    <i class="bi bi-geo-alt"></i>
                    <span>Map View</span>
                </a>
            </div>
            <div class="nav-item">
                <a class="nav-link" href="#analytics">
                    <i class="bi bi-graph-up"></i>
                    <span>Analytics</span>
                </a>
            </div>
            <hr class="sidebar-divider">
            <div class="sidebar-heading">Data</div>
            <div class="nav-item">
                <a class="nav-link" href="#table">
                    <i class="bi bi-table"></i>
                    <span>Table View</span>
                </a>
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-lg-10 col-md-12 p-0">
            <!-- Navbar -->
            <nav class="navbar navbar-expand navbar-light bg-white mb-4 shadow-sm">
                <div class="container-fluid">
                    <button class="navbar-toggler d-lg-none" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav ms-auto">
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown">
                                    <i class="bi bi-person-circle"></i>
                                    <span class="d-none d-lg-inline text-gray-600 small">Admin</span>
                                </a>
                                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                                    <li><a class="dropdown-item" href="#">Settings</a></li>
                                    <li><a class="dropdown-item" href="#">Activity Log</a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item" href="#">Logout</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>

            <!-- Content -->
            <div class="container-fluid px-4">
                <h1 class="h3 mb-4 text-gray-800">B2B AI Companies Dashboard</h1>
                <p class="mb-4">A comprehensive overview of pre-Series B American B2B companies in the AI technology space.</p>

                <!-- Summary Section -->
                <section id="summary" class="mb-4">
                    <div class="row">
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card stats-card primary h-100">
                                <div class="card-body stats-card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="stats-card-heading">Total Companies</div>
                                            <div class="stats-card-value" id="totalCompanies">15</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="bi bi-building stats-card-icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card stats-card success h-100">
                                <div class="card-body stats-card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="stats-card-heading">Seed Stage</div>
                                            <div class="stats-card-value" id="seedStage">7</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="bi bi-graph-up stats-card-icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card stats-card info h-100">
                                <div class="card-body stats-card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="stats-card-heading">Series A</div>
                                            <div class="stats-card-value" id="seriesA">3</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="bi bi-cash-stack stats-card-icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card stats-card warning h-100">
                                <div class="card-body stats-card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="stats-card-heading">Average Employees</div>
                                            <div class="stats-card-value" id="avgEmployees">25</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="bi bi-people stats-card-icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Analytics Section -->
                <section id="analytics" class="mb-4">
                    <div class="row">
                        <div class="col-xl-8 col-lg-7">
                            <div class="card shadow mb-4">
                                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-primary">Companies by Funding Stage</h6>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container">
                                        <canvas id="fundingStageChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-4 col-lg-5">
                            <div class="card shadow mb-4">
                                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-primary">AI Technology Focus</h6>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container">
                                        <canvas id="technologyFocusChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Map Section -->
                <section id="map-section" class="mb-4">
                    <div class="card shadow mb-4">
                        <div class="card-header py-3">
                            <h6 class="m-0 font-weight-bold text-primary">Company Locations</h6>
                        </div>
                        <div class="card-body">
                            <div id="map"></div>
                        </div>
                    </div>
                </section>

                <!-- Companies Section -->
                <section id="companies" class="mb-4">
                    <div class="card shadow mb-4">
                        <div class="card-header py-3">
                            <h6 class="m-0 font-weight-bold text-primary">Featured Companies</h6>
                        </div>
                        <div class="card-body">
                            <div class="search-container">
                                <div class="input-group">
                                    <span class="input-group-text"><i class="bi bi-search"></i></span>
                                    <input type="text" class="form-control" id="companySearch" placeholder="Search companies...">
                                </div>
                            </div>
                            <div class="row" id="companyCards">
                                <!-- Company cards will be dynamically inserted here -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Table Section -->
                <section id="table" class="mb-4">
                    <div class="card shadow mb-4">
                        <div class="card-header py-3">
                            <h6 class="m-0 font-weight-bold text-primary">Company Details</h6>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-bordered" id="companyTable" width="100%" cellspacing="0">
                                    <thead>
                                        <tr>
                                            <th onclick="sortTable(0)">Company <i class="bi bi-arrow-down-up"></i></th>
                                            <th onclick="sortTable(1)">Location <i class="bi bi-arrow-down-up"></i></th>
                                            <th onclick="sortTable(2)">Funding Stage <i class="bi bi-arrow-down-up"></i></th>
                                            <th onclick="sortTable(3)">Founded <i class="bi bi-arrow-down-up"></i></th>
                                            <th onclick="sortTable(4)">Employees <i class="bi bi-arrow-down-up"></i></th>
                                            <th onclick="sortTable(5)">Industry <i class="bi bi-arrow-down-up"></i></th>
                                            <th>Contact</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Table rows will be dynamically inserted here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Footer -->
            <footer class="footer mt-auto">
                <div class="container">
                    <div class="text-center">
                        <span>© 2025 AI Technology Consulting Firm</span>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap" async defer></script>
    <script>
        // Load company data
        let companies = [];
        
        fetch('companies_data.json')
            .then(response => response.json())
            .then(data => {
                companies = data;
                updateDashboard();
            })
            .catch(error => console.error('Error loading company data:', error));
        
        function updateDashboard() {
            updateSummaryStats();
            populateCompanyCards();
            populateCompanyTable();
            createFundingStageChart();
            createTechnologyFocusChart();
            initMap();
        }
        
        function updateSummaryStats() {
            // Count companies by funding stage
            const fundingStages = companies.reduce((acc, company) => {
                const stage = company.funding_stage || 'Unknown';
                acc[stage] = (acc[stage] || 0) + 1;
                return acc;
            }, {});
            
            document.getElementById('totalCompanies').textContent = companies.length;
            document.getElementById('seedStage').textContent = fundingStages['Seed'] || 0;
            document.getElementById('seriesA').textContent = fundingStages['Series A'] || 0;
            
            // Calculate average employee count
            const employeeCounts = companies.map(company => {
                const empStr = company.employee_count || '';
                const match = empStr.match(/(\d+)-(\d+)|(\d+)/);
                if (match) {
                    if (match[3]) return parseInt(match[3]);
                    return Math.floor((parseInt(match[1]) + parseInt(match[2])) / 2);
                }
                return 0;
            }).filter(count => count > 0);
            
            const avgEmployees = employeeCounts.length > 0 
                ? Math.round(employeeCounts.reduce((sum, count) => sum + count, 0) / employeeCounts.length) 
                : 0;
            
            document.getElementById('avgEmployees').textContent = avgEmployees;
        }
        
        function populateCompanyCards() {
            const container = document.getElementById('companyCards');
            container.innerHTML = '';
            
            companies.forEach(company => {
                const card = document.createElement('div');
                card.className = 'col-xl-3 col-md-6 mb-4';
                
                const initial = company.company_name.charAt(0);
                const city = company.address.city || 'Unknown';
                const state = company.address.state || '';
                const location = state ? `${city}, ${state}` : city;
                
                card.innerHTML = `
                    <div class="card company-card h-100">
                        <div class="card-body">
                            <div class="d-flex justify-content-center">
                                <div class="company-logo">${initial}</div>
                            </div>
                            <h5 class="card-title text-center mb-3">${company.company_name}</h5>
                            <div class="mb-2">
                                <span class="badge badge-funding">${company.funding_stage || 'Unknown'}</span>
                                <span class="badge badge-location">${location}</span>
                            </div>
                            <p class="card-text small">${truncateText(company.business_introduction, 100)}</p>
                            <div class="d-flex justify-content-between align-items-center mt-3">
                                <small class="text-muted">Founded: ${company.year_founded || 'Unknown'}</small>
                                <a href="${company.contact_information.website || '#'}" class="btn btn-sm btn-outline-primary" target="_blank">Visit</a>
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(card);
            });
        }
        
        function populateCompanyTable() {
            const tableBody = document.querySelector('#companyTable tbody');
            tableBody.innerHTML = '';
            
            companies.forEach(company => {
                const row = document.createElement('tr');
                
                const city = company.address.city || 'Unknown';
                const state = company.address.state || '';
                const location = state ? `${city}, ${state}` : city;
                
                row.innerHTML = `
                    <td>${company.company_name}</td>
                    <td>${location}</td>
                    <td>${company.funding_stage || 'Unknown'}</td>
                    <td>${company.year_founded || 'Unknown'}</td>
                    <td>${company.employee_count || 'Unknown'}</td>
                    <td>${company.industry || 'AI Technology'}</td>
                    <td>
                        <a href="mailto:${company.contact_information.email}" class="btn btn-sm btn-outline-primary">
                            <i class="bi bi-envelope"></i>
                        </a>
                        <a href="${company.contact_information.website || '#'}" class="btn btn-sm btn-outline-secondary" target="_blank">
                            <i class="bi bi-globe"></i>
                        </a>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        function createFundingStageChart() {
            const fundingStages = companies.reduce((acc, company) => {
                const stage = company.funding_stage || 'Unknown';
                acc[stage] = (acc[stage] || 0) + 1;
                return acc;
            }, {});
            
            const ctx = document.getElementById('fundingStageChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: Object.keys(fundingStages),
                    datasets: [{
                        label: 'Number of Companies',
                        data: Object.values(fundingStages),
                        backgroundColor: [
                            'rgba(78, 115, 223, 0.8)',
                            'rgba(28, 200, 138, 0.8)',
                            'rgba(54, 185, 204, 0.8)',
                            'rgba(246, 194, 62, 0.8)',
                            'rgba(231, 74, 59, 0.8)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                precision: 0
                            }
                        }
                    }
                }
            });
        }
        
        function createTechnologyFocusChart() {
            // Extract and count AI technology focus areas
            const focusAreas = {};
            companies.forEach(company => {
                const focus = company.ai_technology_focus || '';
                const areas = focus.split(',').map(area => area.trim());
                
                areas.forEach(area => {
                    if (area) {
                        focusAreas[area] = (focusAreas[area] || 0) + 1;
                    }
                });
            });
            
            // Sort and take top 5
            const sortedAreas = Object.entries(focusAreas)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 5);
            
            const ctx = document.getElementById('technologyFocusChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: sortedAreas.map(item => item[0]),
                    datasets: [{
                        data: sortedAreas.map(item => item[1]),
                        backgroundColor: [
                            'rgba(78, 115, 223, 0.8)',
                            'rgba(28, 200, 138, 0.8)',
                            'rgba(54, 185, 204, 0.8)',
                            'rgba(246, 194, 62, 0.8)',
                            'rgba(231, 74, 59, 0.8)'
                        ],
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                        }
                    }
                }
            });
        }
        
        function initMap() {
            // This is a placeholder for the map initialization
            // In a real implementation, you would use the Google Maps API
            // to create markers for each company location
            console.log('Map would be initialized here with company locations');
        }
        
        function sortTable(columnIndex) {
            const table = document.getElementById('companyTable');
            const tbody = table.querySelector('tbody');
            const rows = Array.from(tbody.querySelectorAll('tr'));
            
            // Determine sort direction
            const currentSortDir = tbody.getAttribute('data-sort-dir') || 'asc';
            const newSortDir = currentSortDir === 'asc' ? 'desc' : 'asc';
            tbody.setAttribute('data-sort-dir', newSortDir);
            
            // Sort rows
            rows.sort((a, b) => {
                const aValue = a.cells[columnIndex].textContent.trim();
                const bValue = b.cells[columnIndex].textContent.trim();
                
                if (newSortDir === 'asc') {
                    return aValue.localeCompare(bValue);
                } else {
                    return bValue.localeCompare(aValue);
                }
            });
            
            // Reorder rows
            rows.forEach(row => tbody.appendChild(row));
        }
        
        document.getElementById('companySearch').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const cards = document.querySelectorAll('#companyCards .col-xl-3');
            
            cards.forEach(card => {
                const companyName = card.querySelector('.card-title').textContent.toLowerCase();
                const description = card.querySelector('.card-text').textContent.toLowerCase();
                
                if (companyName.includes(searchTerm) || description.includes(searchTerm)) {
                    card.style.display = '';
                } else {
                    card.style.display = 'none';
                }
            });
        });
        
        function truncateText(text, maxLength) {
            if (!text) return '';
            return text.length > maxLength ? text.substring(0, maxLength) + '...' : text;
        }
    </script>
</body>
</html>
